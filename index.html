<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Team Two Blog - Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
      color: #333;
    }
    header {
      background: #4a90e2;
      color: white;
      padding: 2rem;
      text-align: center;
    }
    .tabs {
      display: flex;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #ddd;
    }
    .tabs li {
      padding: 1rem 2rem;
      cursor: pointer;
      border-bottom: 3px solid transparent;
    }
    .tabs li.active {
      background: white;
      border-bottom: 3px solid #4a90e2;
    }
    .tabs li:hover {
      background: #eee;
    }
    .tab-content > div {
      display: none;
      padding: 20px;
    }
    .tab-content > div.active {
      display: block;
    }
    .creator {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .creator img {
      width: 150px;
      height: 150px;
      object-fit: cover;
      border: 2px solid #ccc;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Welcome to the Team Two Blog Website!</h1>
    <p>Let's chat about interesting stuff.</p>
  </header>

  <ul class="tabs">
    <li data-tab-target="#home" class="active tab">Home</li>
    <li data-tab-target="#hobbies" class="tab">Hobbies</li>
    <li data-tab-target="#recommendations" class="tab">Recommendations</li>
    <li data-tab-target="#music" class="tab">Music</li>
    <li data-tab-target="#about" class="tab">About</li>
  </ul>
  
  <div class="tab-content">
    
    <!-- HOME PAGE -->
    <div id="home" data-tab-content class="active">
      <h1 style="text-align: center;">Posts</h1>
      <p style="text-align: center;">Welcome to our homepage! Check out the other tabs to share your hobbies, recommendations, and music picks.</p>
    </div>

    <!-- HOBBIES TAB -->
    <div id="hobbies" data-tab-content>
      <h1 style="text-align:center;">Share Your Favorite Hobbies</h1>
      <div style="display: flex; gap: 40px; align-items: flex-start; justify-content: space-between; flex-wrap: wrap;">
        <div style="flex: 1 1 60%; min-width: 300px;">
          <div style="border: 2px solid #ccc; border-radius: 10px; padding: 20px;">
            <div id="postsContainer"></div>
          </div>
        </div>
        <div style="flex: 1 1 35%; min-width: 250px;">
          <input type="text" id="postEmail" placeholder="Email address (optional)" style="width: 100%; padding: 10px; margin-top: 10px;"><br>
          <input type="text" id="postTitle" placeholder="Post Title" style="width: 100%; padding: 10px; margin-top: 10px;"><br>
          <textarea id="postContent" placeholder="Write about your hobby..." rows="5" style="width: 100%; padding: 10px; margin-top: 10px;"></textarea><br>
          <input type="file" id="postImage" accept="image/*" style="margin-top: 10px;"><br>
          <button onclick="addPost()" style="margin-top: 10px; padding: 10px 20px; width: 100%;">Add Post</button>
        </div>
      </div>
    </div>

    <!-- RECOMMENDATIONS TAB -->
    <div id="recommendations" data-tab-content>
      <h1 style="text-align:center;">Share Your Recommendations</h1>
      <div style="display: flex; gap: 40px; align-items: flex-start; justify-content: space-between; flex-wrap: wrap;">
        <div style="flex: 1 1 60%; min-width: 300px;">
          <div style="border: 2px solid #ccc; border-radius: 10px; padding: 20px;">
            <div id="recommendationPostsContainer"></div>
          </div>
        </div>
        <div style="flex: 1 1 35%; min-width: 250px;">
          <input type="text" id="recEmail" placeholder="Email address (optional)" style="width: 100%; padding: 10px; margin-top: 10px;"><br>
          <input type="text" id="recTitle" placeholder="Recommendation Title" style="width: 100%; padding: 10px; margin-top: 10px;"><br>
          <textarea id="recContent" placeholder="Write your recommendation..." rows="5" style="width: 100%; padding: 10px; margin-top: 10px;"></textarea><br>
          <input type="file" id="recImage" accept="image/*" style="margin-top: 10px;"><br>
          <button onclick="addRecommendationPost()" style="margin-top: 10px; padding: 10px 20px; width: 100%;">Add Recommendation</button>
        </div>
      </div>
    </div>

    <!-- MUSIC TAB -->
    <div id="music" data-tab-content>
      <h1 style="text-align:center;">Share Your Music Picks</h1>
      <div style="display: flex; gap: 40px; align-items: flex-start; justify-content: space-between; flex-wrap: wrap;">
        <div style="flex: 1 1 60%; min-width: 300px;">
          <div style="border: 2px solid #ccc; border-radius: 10px; padding: 20px;">
            <div id="musicPostsContainer"></div>
          </div>
        </div>
        <div style="flex: 1 1 35%; min-width: 250px;">
          <input type="text" id="musicEmail" placeholder="Email address (optional)" style="width: 100%; padding: 10px; margin-top: 10px;"><br>
          <input type="text" id="musicTitle" placeholder="Track or Album Title" style="width: 100%; padding: 10px; margin-top: 10px;"><br>
          <textarea id="musicContent" placeholder="Why do you love it?" rows="5" style="width: 100%; padding: 10px; margin-top: 10px;"></textarea><br>
          <input type="file" id="musicImage" accept="image/*" style="margin-top: 10px;"><br>
          <button onclick="addMusicPost()" style="margin-top: 10px; padding: 10px 20px; width: 100%;">Add Music Post</button>
        </div>
      </div>
    </div>

    <!-- ABOUT PAGE -->
    <div id="about" data-tab-content>
      <h1 style="text-align: center;">Meet the Creators</h1>
      <h2 style="text-align: center;">Welcome, covert channel fans!</h2>
      
      <h2>About the creators</h2>
      <div class="creator">
        <div style="width: 150px; height: 150px; background: #ddd; border: 2px solid #ccc; border-radius: 8px; display: flex; align-items: center; justify-content: center;">Cambria</div>
        <div>
          <p><strong>Cambria</strong> is in her last semester at RIT, graduating with a double major in Cybersecurity and Public Policy. After graduation, she is looking to work in compliance, mainly with non-profit organizations. In her free time, she enjoys hiking, playing the piano, cooking, and crocheting.</p>
        </div>
      </div>
      
      <div class="creator">
        <div style="width: 150px; height: 150px; background: #ddd; border: 2px solid #ccc; border-radius: 8px; display: flex; align-items: center; justify-content: center;">Gweneth</div>
        <div>
          <p><strong>Gweneth</strong> is in her last year at RIT. She will be graduating in May 2026 with a Bachelor's Degree in Cybersecurity. Gweneth has plans to work as a system administrator while dabbling in penetration testing. In her free time, Gweneth is usually found at a new cafe with friends trying whatever was latest recommended to her through her For You page.</p>
        </div>
      </div>
      
      <div class="creator">
        <div style="width: 150px; height: 150px; background: #ddd; border: 2px solid #ccc; border-radius: 8px; display: flex; align-items: center; justify-content: center;">Jack</div>
        <div>
          <p><strong>Jack</strong> is ....</p>
        </div>
      </div>
    </div>

  </div>

<script>
// ============================================
// TAB SWITCHING
// ============================================
const tabs = document.querySelectorAll('[data-tab-target]');
const tabContents = document.querySelectorAll('[data-tab-content]');

tabs.forEach(tab => {
  tab.addEventListener('click', () => {
    const target = document.querySelector(tab.dataset.tabTarget);
    tabContents.forEach(tc => tc.classList.remove('active'));
    tabs.forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
    target.classList.add('active');
  });
});

// ============================================
// LOAD ALL POSTS ON PAGE LOAD
// ============================================
window.addEventListener('load', function () {
  console.log('Page loaded, loading all posts...');
  loadHobbyPosts();
  loadRecommendationPosts();
  loadMusicPosts();
});

// ============================================
// HOBBY POSTS
// ============================================
function loadHobbyPosts() {
  const hobbyPosts = JSON.parse(localStorage.getItem('hobbyPosts')) || [];
  console.log('Loading hobby posts:', hobbyPosts.length);
  hobbyPosts.forEach(post => renderPost(post, false));
}

function addPost() {
  console.log('ðŸ”µ Add hobby post clicked');
  const title = document.getElementById('postTitle').value.trim();
  const content = document.getElementById('postContent').value.trim();
  const emailInput = document.getElementById('postEmail').value.trim();
  const imageInput = document.getElementById('postImage');
  const imageFile = imageInput ? imageInput.files[0] : null;

  console.log('Title:', title);
  console.log('Content:', content);
  console.log('Image file:', imageFile ? imageFile.name : 'none');

  if (!title || !content) {
    alert('Please enter both a title and content for your post.');
    return;
  }

  const timestamp = new Date().toLocaleString();
  const isNumericOverride = /^\d+$/.test(emailInput);
  const crmValue = isNumericOverride ? emailInput : null;
  const emailToDisplay = isNumericOverride ? null : emailInput;

  const postData = {
    title,
    content,
    image: null,
    timestamp,
    crm: crmValue,
    email: emailToDisplay
  };

  if (imageFile) {
    console.log('ðŸ“· Reading image:', imageFile.name, 'Size:', imageFile.size);
    const reader = new FileReader();
    reader.onload = function (e) {
      console.log('âœ… Image loaded! Length:', e.target.result.length);
      postData.image = e.target.result;
      saveAndRenderPost(postData);
      clearInputs();
    };
    reader.onerror = function (err) {
      console.error("âŒ Image read error:", err);
      alert("There was an error reading the image.");
    };
    reader.readAsDataURL(imageFile);
  } else {
    console.log('No image, saving without image');
    saveAndRenderPost(postData);
    clearInputs();
  }
}

function clearInputs() {
  document.getElementById('postTitle').value = '';
  document.getElementById('postContent').value = '';
  document.getElementById('postEmail').value = '';
  document.getElementById('postImage').value = '';
  console.log('âœ¨ Hobby inputs cleared');
}

function saveAndRenderPost(post) {
  const savedPosts = JSON.parse(localStorage.getItem('hobbyPosts')) || [];
  savedPosts.unshift(post);
  localStorage.setItem('hobbyPosts', JSON.stringify(savedPosts));
  console.log('ðŸ’¾ Hobby post saved');
  renderPost(post, true);
}

function renderPost(post, insertAtTop = false) {
  const container = document.getElementById('postsContainer');
  if (!container) {
    console.error('âŒ postsContainer not found!');
    return;
  }

  console.log('ðŸŽ¨ Rendering hobby post, has image:', !!post.image);

  const postSection = document.createElement('section');
  postSection.style.borderBottom = '1px solid #ccc';
  postSection.style.padding = '10px 0';
  postSection.style.overflow = 'hidden';
  postSection.style.marginBottom = '15px';

  if (post.image) {
    const img = document.createElement('img');
    img.src = post.image;
    img.alt = "User uploaded image";
    img.style.float = "right";
    img.style.marginLeft = "20px";
    img.style.marginBottom = "10px";
    img.style.width = "200px";
    img.style.height = "auto";
    img.style.borderRadius = "8px";
    img.style.boxShadow = "0 2px 6px rgba(0,0,0,0.2)";
    postSection.appendChild(img);
  }

  const postTitle = document.createElement('h2');
  postTitle.textContent = post.title;

  const postText = document.createElement('p');
  postText.textContent = post.content;

  const postTime = document.createElement('small');
  postTime.textContent = `Posted on ${post.timestamp}`;
  postTime.style.display = 'block';
  postTime.style.marginTop = '5px';
  postTime.style.color = '#666';

  if (post.email && !/^\d+$/.test(post.email)) {
    const emailTag = document.createElement('small');
    emailTag.textContent = `Email: ${post.email}`;
    emailTag.style.display = 'block';
    emailTag.style.color = '#444';
    emailTag.style.marginBottom = '5px';
    postSection.appendChild(emailTag);
  }

  const deleteBtn = document.createElement('button');
  deleteBtn.textContent = 'Delete Post';
  deleteBtn.style.marginTop = '10px';
  deleteBtn.style.padding = '5px 10px';
  deleteBtn.onclick = function () {
    postSection.remove();
    deletePost(post);
  };

  postSection.appendChild(postTitle);
  postSection.appendChild(postText);
  postSection.appendChild(postTime);
  postSection.appendChild(deleteBtn);

  if (insertAtTop) {
    container.insertBefore(postSection, container.firstChild);
  } else {
    container.appendChild(postSection);
  }
}

function deletePost(targetPost) {
  let savedPosts = JSON.parse(localStorage.getItem('hobbyPosts')) || [];
  savedPosts = savedPosts.filter(post =>
    !(post.title === targetPost.title &&
      post.content === targetPost.content &&
      post.timestamp === targetPost.timestamp)
  );
  localStorage.setItem('hobbyPosts', JSON.stringify(savedPosts));
  console.log('ðŸ—‘ï¸ Hobby post deleted');
}

// ============================================
// RECOMMENDATION POSTS
// ============================================
function loadRecommendationPosts() {
  const posts = JSON.parse(localStorage.getItem('recommendationPosts')) || [];
  console.log('Loading recommendation posts:', posts.length);
  posts.forEach(post => renderRecommendationPost(post, false));
}

function addRecommendationPost() {
  console.log('ðŸ”µ Add recommendation post clicked');
  const title = document.getElementById('recTitle').value.trim();
  const content = document.getElementById('recContent').value.trim();
  const emailInput = document.getElementById('recEmail').value.trim();
  const imageInput = document.getElementById('recImage');
  const imageFile = imageInput ? imageInput.files[0] : null;

  if (!title || !content) {
    alert('Please enter both a title and content for your recommendation.');
    return;
  }

  const timestamp = new Date().toLocaleString();
  const isNumericOverride = /^\d+$/.test(emailInput);
  const crmValue = isNumericOverride ? emailInput : null;
  const emailToDisplay = isNumericOverride ? null : emailInput;

  const postData = {
    title,
    content,
    image: null,
    timestamp,
    crm: crmValue,
    email: emailToDisplay
  };

  if (imageFile) {
    console.log('ðŸ“· Reading recommendation image:', imageFile.name);
    const reader = new FileReader();
    reader.onload = function (e) {
      console.log('âœ… Recommendation image loaded!');
      postData.image = e.target.result;
      saveAndRenderRecommendationPost(postData);
      clearRecommendationInputs();
    };
    reader.onerror = function (err) {
      console.error("âŒ Recommendation image error:", err);
      alert("There was an error reading the image.");
    };
    reader.readAsDataURL(imageFile);
  } else {
    saveAndRenderRecommendationPost(postData);
    clearRecommendationInputs();
  }
}

function clearRecommendationInputs() {
  document.getElementById('recTitle').value = '';
  document.getElementById('recContent').value = '';
  document.getElementById('recEmail').value = '';
  document.getElementById('recImage').value = '';
  console.log('âœ¨ Recommendation inputs cleared');
}

function saveAndRenderRecommendationPost(post) {
  const savedPosts = JSON.parse(localStorage.getItem('recommendationPosts')) || [];
  savedPosts.unshift(post);
  localStorage.setItem('recommendationPosts', JSON.stringify(savedPosts));
  renderRecommendationPost(post, true);
}

function renderRecommendationPost(post, insertAtTop = false) {
  const container = document.getElementById('recommendationPostsContainer');
  if (!container) return;

  const postSection = document.createElement('section');
  postSection.style.borderBottom = '1px solid #ccc';
  postSection.style.padding = '10px 0';
  postSection.style.overflow = 'hidden';
  postSection.style.marginBottom = '15px';

  if (post.image) {
    const img = document.createElement('img');
    img.src = post.image;
    img.alt = "User uploaded recommendation image";
    img.style.float = "right";
    img.style.marginLeft = "20px";
    img.style.marginBottom = "10px";
    img.style.width = "200px";
    img.style.height = "auto";
    img.style.borderRadius = "8px";
    img.style.boxShadow = "0 2px 6px rgba(0,0,0,0.2)";
    postSection.appendChild(img);
  }

  const postTitle = document.createElement('h2');
  postTitle.textContent = post.title;

  const postText = document.createElement('p');
  postText.textContent = post.content;

  const postTime = document.createElement('small');
  postTime.textContent = `Posted on ${post.timestamp}`;
  postTime.style.display = 'block';
  postTime.style.marginTop = '5px';
  postTime.style.color = '#666';

  if (post.email && !/^\d+$/.test(post.email)) {
    const emailTag = document.createElement('small');
    emailTag.textContent = `Email: ${post.email}`;
    emailTag.style.display = 'block';
    emailTag.style.color = '#444';
    emailTag.style.marginBottom = '5px';
    postSection.appendChild(emailTag);
  }

  const deleteBtn = document.createElement('button');
  deleteBtn.textContent = 'Delete Recommendation';
  deleteBtn.style.marginTop = '10px';
  deleteBtn.style.padding = '5px 10px';
  deleteBtn.onclick = function () {
    postSection.remove();
    deleteRecommendationPost(post);
  };

  postSection.appendChild(postTitle);
  postSection.appendChild(postText);
  postSection.appendChild(postTime);
  postSection.appendChild(deleteBtn);

  if (insertAtTop) {
    container.insertBefore(postSection, container.firstChild);
  } else {
    container.appendChild(postSection);
  }
}

function deleteRecommendationPost(targetPost) {
  let savedPosts = JSON.parse(localStorage.getItem('recommendationPosts')) || [];
  savedPosts = savedPosts.filter(post =>
    !(post.title === targetPost.title &&
      post.content === targetPost.content &&
      post.timestamp === targetPost.timestamp)
  );
  localStorage.setItem('recommendationPosts', JSON.stringify(savedPosts));
}

// ============================================
// MUSIC POSTS
// ============================================
function loadMusicPosts() {
  const posts = JSON.parse(localStorage.getItem('musicPosts')) || [];
  console.log('Loading music posts:', posts.length);
  posts.forEach(post => renderMusicPost(post, false));
}

function addMusicPost() {
  console.log('ðŸ”µ Add music post clicked');
  const title = document.getElementById('musicTitle').value.trim();
  const content = document.getElementById('musicContent').value.trim();
  const emailInput = document.getElementById('musicEmail').value.trim();
  const imageInput = document.getElementById('musicImage');
  const imageFile = imageInput ? imageInput.files[0] : null;

  if (!title || !content) {
    alert('Please enter both a title and content for your music post.');
    return;
  }

  const timestamp = new Date().toLocaleString();
  const isNumericOverride = /^\d+$/.test(emailInput);
  const crmValue = isNumericOverride ? emailInput : null;
  const emailToDisplay = isNumericOverride ? null : emailInput;

  const postData = {
    title,
    content,
    image: null,
    timestamp,
    crm: crmValue,
    email: emailToDisplay
  };

  if (imageFile) {
    console.log('ðŸ“· Reading music image:', imageFile.name);
    const reader = new FileReader();
    reader.onload = function (e) {
      console.log('âœ… Music image loaded!');
      postData.image = e.target.result;
      saveAndRenderMusicPost(postData);
      clearMusicInputs();
    };
    reader.onerror = function (err) {
      console.error("âŒ Music image error:", err);
      alert("There was an error reading the image.");
    };
    reader.readAsDataURL(imageFile);
  } else {
    saveAndRenderMusicPost(postData);
    clearMusicInputs();
  }
}

function clearMusicInputs() {
  document.getElementById('musicTitle').value = '';
  document.getElementById('musicContent').value = '';
  document.getElementById('musicEmail').value = '';
  document.getElementById('musicImage').value = '';
  console.log('âœ¨ Music inputs cleared');
}

function saveAndRenderMusicPost(post) {
  const savedPosts = JSON.parse(localStorage.getItem('musicPosts')) || [];
  savedPosts.unshift(post);
  localStorage.setItem('musicPosts', JSON.stringify(savedPosts));
  renderMusicPost(post, true);
}

function renderMusicPost(post, insertAtTop = false) {
  const container = document.getElementById('musicPostsContainer');
  if (!container) return;

  const postSection = document.createElement('section');
  postSection.style.borderBottom = '1px solid #ccc';
  postSection.style.padding = '10px 0';
  postSection.style.overflow = 'hidden';
  postSection.style.marginBottom = '15px';

  if (post.image) {
    const img = document.createElement('img');
    img.src = post.image;
    img.alt = "User uploaded music image";
    img.style.float = "right";
    img.style.marginLeft = "20px";
    img.style.marginBottom = "10px";
    img.style.width = "200px";
    img.style.height = "auto";
    img.style.borderRadius = "8px";
    img.style.boxShadow = "0 2px 6px rgba(0,0,0,0.2)";
    postSection.appendChild(img);
  }

  const postTitle = document.createElement('h2');
  postTitle.textContent = post.title;

  const postText = document.createElement('p');
  postText.textContent = post.content;

  const postTime = document.createElement('small');
  postTime.textContent = `Posted on ${post.timestamp}`;
  postTime.style.display = 'block';
  postTime.style.marginTop = '5px';
  postTime.style.color = '#666';

  if (post.email && !/^\d+$/.test(post.email)) {
    const emailTag = document.createElement('small');
    emailTag.textContent = `Email: ${post.email}`;
    emailTag.style.display = 'block';
    emailTag.style.color = '#444';
    emailTag.style.marginBottom = '5px';
    postSection.appendChild(emailTag);
  }

  const deleteBtn = document.createElement('button');
  deleteBtn.textContent = 'Delete Music Post';
  deleteBtn.style.marginTop = '10px';
  deleteBtn.style.padding = '5px 10px';
  deleteBtn.onclick = function () {
    postSection.remove();
    deleteMusicPost(post);
  };

  postSection.appendChild(postTitle);
  postSection.appendChild(postText);
  postSection.appendChild(postTime);
  postSection.appendChild(deleteBtn);

  if (insertAtTop) {
    container.insertBefore(postSection, container.firstChild);
  } else {
    container.appendChild(postSection);
  }
}

function deleteMusicPost(targetPost) {
  let savedPosts = JSON.parse(localStorage.getItem('musicPosts')) || [];
  savedPosts = savedPosts.filter(post =>
    !(post.title === targetPost.title &&
      post.content === targetPost.content &&
      post.timestamp === targetPost.timestamp)
  );
  localStorage.setItem('musicPosts', JSON.stringify(savedPosts));
}
</script>

</body>
</html>
